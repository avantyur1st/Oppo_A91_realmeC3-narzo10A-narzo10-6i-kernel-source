NOT WORKING

1.install toolchain and make tools for build kernel

(1)mkdir -p ~/workspace/source; cd ~/workspace/source;

(2)git clone kernel;

(3)mkdir prebuilts;
git clone https://android.googlesource.com/platform/prebuilts/build-tools;
wget -O - https://github.com/ravindu644/Android-Kernel-Tutorials/releases/download/toolchains/arm-gnu-toolchain-14.2.rel1-x86_64-aarch64-none-linux-gnu.tar.xz | tar -xJ
mkdir -p clang-r383902b && wget https://android.googlesource.com/platform/prebuilts/clang/host/linux-x86/+archive/0e9e7035bf8ad42437c6156e5950eab13655b26c/clang-r383902b.tar.gz | tar -xz -C clang-r383902b

(4) add toolchain path to PATH environment variable

2. export some environment variable and build the kernel and dtb ,oppo6785 instead of oppo6769 follow for mobile model RMX2151 RMX2183 RMX2161 RMX2001 RMX2001 RMX2003 RMX2002 RMX2156

export SOURCE_ROOT=~/workspace/source
export DEFCONFIG=oppo6771_defconfig
export COMPILE_PLATFORM=oppo6771
export OPPO_COMPILE_PLATFORM=oppo6771
export PATH=${SOURCE_ROOT}/prebuilts/clang-r383902b/bin:${SOURCE_ROOT}/prebuilts/arm-gnu-toolchain-14.2.rel1-x86_64-aarch64-none-linux-gnu/bin:/usr/bin:/bin:$PATH
export MAKE_PATH=${SOURCE_ROOT}/prebuilts/build-tools/linux-x86/bin/
export CROSS_COMPILE=${SOURCE_ROOT}/prebuilts/arm-gnu-toolchain-14.2.rel1-x86_64-aarch64-none-linux-gnu/bin/aarch64-none-linux-gnu-
export KERNEL_ARCH=arm64
export KERNEL_DIR=${SOURCE_ROOT}/realmeC3-narzo10A-narzo10-6i-kernel-source
export KERNEL_OUT=${KERNEL_DIR}/../kernel_out
export KERNEL_SRC=${KERNEL_OUT}
export CLANG_TRIPLE=aarch64-none-linux-gnu-
export OUT_DIR=${KERNEL_OUT}
export ARCH=${KERNEL_ARCH}
export TARGET_INCLUDES=${TARGET_KERNEL_MAKE_CFLAGS}
export TARGET_LINCLUDES=${TARGET_KERNEL_MAKE_LDFLAGS}

export TARGET_KERNEL_MAKE_ENV="LD=ld.lld NM=llvm-nm OBJCOPY=llvm-objcopy CC=${SOURCE_ROOT}/prebuilts/clang-r383902b/bin/clang"

cd ${KERNEL_DIR} && \
make O=${OUT_DIR} ${TARGET_KERNEL_MAKE_ENV} HOSTLDFLAGS="${TARGET_LINCLUDES}" ARCH=${ARCH} CROSS_COMPILE=${CROSS_COMPILE} ${DEFCONFIG}

cd ${OUT_DIR} && \
make ARCH=${ARCH} CROSS_COMPILE=${CROSS_COMPILE} HOSTCFLAGS="${TARGET_INCLUDES}" HOSTLDFLAGS="${TARGET_LINCLUDES}" O=${OUT_DIR} ${TARGET_KERNEL_MAKE_ENV}
